version: "2.2"

services:

  app:
    image: "jc21/nginx-proxy-manager:latest"
    container_name: "nginx-proxy-manager"
    environment:
      - "PUID=1000"
      - "PGID=1000"
    volumes:
      - "${DATA_PATH}/nginx-proxy-manager:/data"
      - "${DATA_PATH}/letsencrypt:/etc/letsencrypt"
    ports:
      - 443:443
      - 80:80
      # Admin Dashboard
      - 81:81
    restart: "unless-stopped"
    env_file:
      - ../envs/base.env

  authelia:
    image: "authelia/authelia"
    container_name: "authelia"
    ports:
      - 9091:9091
    volumes:
      - "${DATA_PATH}/authelia:/config"
    restart: "unless-stopped"
    env_file:
      - ../envs/base.env

  homepage:
    image: "ghcr.io/gethomepage/homepage:latest"
    container_name: "homepage"
    environment:
      - "PUID=1000"
      - "PGID=1000"
    ports:
      - 3000:3000
    volumes:
      - "${DATA_PATH}/homepage:/app/config"
      - "/var/run/docker.sock:/var/run/docker.sock:ro"
    restart: "unless-stopped"
    env_file:
      - ../envs/base.env

networks:
  default:
    name: lsio
    external: true
